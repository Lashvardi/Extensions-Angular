{"ast":null,"code":"import * as i0 from \"@angular/core\";\nexport class CaptureScreenComponent {\n  constructor() {\n    // Create an arrow function to correctly capture the 'this' context\n    this.handleScreenshotURL = event => {\n      if (event.data.type && event.data.type === 'SCREENSHOT_URL') {\n        console.log(event.data.url);\n      }\n    };\n    // Listen for the screenshot URLs only once in the constructor\n    window.addEventListener('message', this.handleScreenshotURL, false);\n  }\n  ngOnDestroy() {\n    // Remove the event listener when the component is destroyed to avoid memory leaks\n    window.removeEventListener('message', this.handleScreenshotURL);\n  }\n  startCapturing() {\n    window.postMessage({\n      type: 'CAPTURE_SCREENSHOT'\n    }, '*');\n  }\n  stopCapturing() {\n    const event = new CustomEvent('STOP_CAPTURE', {\n      detail: {\n        type: 'STOP_CAPTURE'\n      }\n    });\n    // Dispatch the custom event\n    window.dispatchEvent(event);\n  }\n}\nCaptureScreenComponent.ɵfac = function CaptureScreenComponent_Factory(t) {\n  return new (t || CaptureScreenComponent)();\n};\nCaptureScreenComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CaptureScreenComponent,\n  selectors: [[\"app-capture-screen\"]],\n  decls: 4,\n  vars: 0,\n  consts: [[3, \"click\"]],\n  template: function CaptureScreenComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"button\", 0);\n      i0.ɵɵlistener(\"click\", function CaptureScreenComponent_Template_button_click_0_listener() {\n        return ctx.startCapturing();\n      });\n      i0.ɵɵtext(1, \"Start Capturing\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"button\", 0);\n      i0.ɵɵlistener(\"click\", function CaptureScreenComponent_Template_button_click_2_listener() {\n        return ctx.stopCapturing();\n      });\n      i0.ɵɵtext(3, \"Stop Capturing\");\n      i0.ɵɵelementEnd();\n    }\n  },\n  styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"mappings":";AAOA,OAAM,MAAOA,sBAAsB;EAIjCC;IACE;IACA,IAAI,CAACC,mBAAmB,GAAIC,KAAmB,IAAI;MACjD,IAAIA,KAAK,CAACC,IAAI,CAACC,IAAI,IAAIF,KAAK,CAACC,IAAI,CAACC,IAAI,KAAK,gBAAgB,EAAE;QAC3DC,OAAO,CAACC,GAAG,CAACJ,KAAK,CAACC,IAAI,CAACI,GAAG,CAAC;;IAE/B,CAAC;IAED;IACAC,MAAM,CAACC,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACR,mBAAmB,EAAE,KAAK,CAAC;EACrE;EAEAS,WAAW;IACT;IACAF,MAAM,CAACG,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAACV,mBAAmB,CAAC;EACjE;EAEAW,cAAc;IACZJ,MAAM,CAACK,WAAW,CAAC;MAAET,IAAI,EAAE;IAAoB,CAAE,EAAE,GAAG,CAAC;EACzD;EAEAU,aAAa;IACX,MAAMZ,KAAK,GAAG,IAAIa,WAAW,CAAC,cAAc,EAAE;MAC5CC,MAAM,EAAE;QAAEZ,IAAI,EAAE;MAAc;KAC/B,CAAC;IACF;IACAI,MAAM,CAACS,aAAa,CAACf,KAAK,CAAC;EAC7B;;AA/BWH,sBAAsB;mBAAtBA,sBAAsB;AAAA;AAAtBA,sBAAsB;QAAtBA,sBAAsB;EAAAmB;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCPnCC,iCAAmC;MAA3BA;QAAA,OAASC,oBAAgB;MAAA,EAAC;MAACD,+BAAe;MAAAA,iBAAS;MAC3DA,iCAAkC;MAA1BA;QAAA,OAASC,mBAAe;MAAA,EAAC;MAACD,8BAAc;MAAAA,iBAAS","names":["CaptureScreenComponent","constructor","handleScreenshotURL","event","data","type","console","log","url","window","addEventListener","ngOnDestroy","removeEventListener","startCapturing","postMessage","stopCapturing","CustomEvent","detail","dispatchEvent","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["C:\\Users\\DevTeam\\Desktop\\ExtensionProtocols\\Extension\\src\\app\\capture-screen\\capture-screen.component.ts","C:\\Users\\DevTeam\\Desktop\\ExtensionProtocols\\Extension\\src\\app\\capture-screen\\capture-screen.component.html"],"sourcesContent":["import { Component, OnDestroy } from '@angular/core';\n\n@Component({\n  selector: 'app-capture-screen',\n  templateUrl: './capture-screen.component.html',\n  styleUrls: ['./capture-screen.component.scss'],\n})\nexport class CaptureScreenComponent implements OnDestroy {\n  private captureIntervalId: any;\n  private handleScreenshotURL: (event: MessageEvent) => void;\n\n  constructor() {\n    // Create an arrow function to correctly capture the 'this' context\n    this.handleScreenshotURL = (event: MessageEvent) => {\n      if (event.data.type && event.data.type === 'SCREENSHOT_URL') {\n        console.log(event.data.url);\n      }\n    };\n\n    // Listen for the screenshot URLs only once in the constructor\n    window.addEventListener('message', this.handleScreenshotURL, false);\n  }\n\n  ngOnDestroy() {\n    // Remove the event listener when the component is destroyed to avoid memory leaks\n    window.removeEventListener('message', this.handleScreenshotURL);\n  }\n\n  startCapturing() {\n    window.postMessage({ type: 'CAPTURE_SCREENSHOT' }, '*');\n  }\n\n  stopCapturing() {\n    const event = new CustomEvent('STOP_CAPTURE', {\n      detail: { type: 'STOP_CAPTURE' },\n    });\n    // Dispatch the custom event\n    window.dispatchEvent(event);\n  }\n}\n","<button (click)=\"startCapturing()\">Start Capturing</button>\n<button (click)=\"stopCapturing()\">Stop Capturing</button>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}